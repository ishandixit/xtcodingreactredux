webpackJsonp([3],{RXk1:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.default.createElement(l.Fragment,null,i.default.createElement(s.default,{sortable:!1,filterable:!1,data:e.data,columns:p,defaultPageSize:100,getTdProps:function(t,a,n,r){return{onClick:function(t,r){"Take Action"==n.Header&&e.takeAction(a.original)}}},minRows:1,showPagination:!1,className:"col m12 card z-depth-0",noDataText:i.default.createElement("span",null,"No found")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.GRNLIST=r;var l=a("GiK3"),i=n(l),o=a("kYk7"),s=n(o),c=a("PJh5"),u=n(c),d={1:"Print QR Code",2:"Force Close",3:"Force Closed",4:"Normal Closed"},m={1:"green",2:"orange",3:"red",4:"blue"},p=[{Header:"S.No",width:100,Cell:function(e){return e.index+1}},{Header:"GRN No",accessor:"grnNumber"},{Header:"GRN Date",accessor:"goodsArrivedDate",Cell:function(e){return i.default.createElement("span",null,(0,u.default)(e.value).format("ll"))}},{Header:"Organisation",id:"organisationName",accessor:function(e){return e.organisation.name}},{Header:"Supplier",id:"supplier",accessor:function(e){return e.supplier.name}},{Header:"IN PROC./TOTAL CARTON",Cell:function(e){return i.default.createElement("span",{className:"number"},e.original.inProcessCartons,"/",e.original.totalCartons)}},{Header:"SCANNED/EXPECTED PIECES",Cell:function(e){return i.default.createElement("span",{className:"number"},e.original.scannedSkus,"/",e.original.expectedPieces)}},{Header:"Take Action",style:{textAlign:"center"},headerStyle:{textAlign:"center"},Cell:function(e){return i.default.createElement("button",{className:"btn btn-small "+m[e.original.status]},d[e.original.status])}}]},lpyT:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a("GiK3"),c=function(e){return e&&e.__esModule?e:{default:e}}(s),u=a("F8kA"),d=a("Oafi");a("2Xom");var m=a("RH2O"),p=a("RXk1"),f=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));g.call(a);var n=new Date;return a.state={currentGrn:10,grndata:{organisation:"",grnType:"",supplier:"",customer:"",supervisor:a.props.user._id,poNo:"",poDate:"",invoiceNo:"",invoiceDate:"",invoiceQty:"",transporter:"",grnNumber:"10",awbNo:"",cartonsReceived:"",awbDate:"",weight:"",goodsArrivedDate:n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},error:{organisation:"",grnType:"",supplier:"",customer:"",poNo:"",poDate:"",invoiceNo:"",invoiceDate:"",invoiceQty:"",grnNumber:"",awbNo:"",cartonsReceived:"",awbDate:"",weight:"",goodsArrivedDate:""},customer:[],supplier:[],warehouse:[],transporter:[],organization:[],currentDatePicker:"",grnList:[]},a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this,t=document.querySelectorAll(".modal");M.Modal.init(t,{dismissible:!1});var a=document.querySelectorAll(".datepicker");M.Datepicker.init(a,{format:"yyyy-mm-dd",onSelect:function(t){return e.selectDate(t)}}),M.updateTextFields(),this.getGrnList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.customer,n=t.supplier,r=t.organization,l=t.grnList,i=t.error,o=t.grndata;return c.default.createElement("div",{className:"inwarding"},c.default.createElement("div",{className:"row"},c.default.createElement("span",{className:"grn",onClick:function(t){return e.openModal()}},c.default.createElement("button",{className:"waves-effect waves-light btn",style:{borderRadius:"7px"}},"Create Grn")),c.default.createElement(u.Link,{className:"waves-effect waves-light btn light-green",to:"/inward/inscanSku",style:{borderRadius:"7px"}},"Inscan SKU"),l.length>0&&c.default.createElement(p.GRNLIST,{takeAction:this.takeAction,data:l}),c.default.createElement("div",{id:"goodreceiptnote",className:"modal modal1",style:{minHeight:300}},c.default.createElement("div",{className:"modal-head"},c.default.createElement("div",null,"Name : ",this.props.user.firstName),c.default.createElement("div",{style:{marginLeft:20}},"Arrival Date : ",this.state.grndata.goodsArrivedDate),c.default.createElement("div",{style:{marginLeft:20}},"GRN NO : ",this.state.currentGrn)),c.default.createElement("form",{onChange:this.handleFormChange},c.default.createElement("div",{className:"modal-content"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("span",null,"Organisation"),c.default.createElement("select",{id:"organisation",name:"organisation",value:this.state.grndata.organisation,className:i.organisation.length>0?"browser-default invalid":"browser-default"},c.default.createElement("option",{value:"",disabled:!0,selected:!0},"Select Organisation"),r.map(function(e,t){return c.default.createElement("option",{value:e._id,key:t},e.name)}))),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("span",null,"Grn Type"),c.default.createElement("select",{id:"grnType",name:"grnType",value:this.state.grndata.grnType,className:i.grnType.length>0?"browser-default invalid":"browser-default"},c.default.createElement("option",{value:"",disabled:!0,selected:!0},"Select Type"),c.default.createElement("option",{value:"New Grn"},"NEW GRN"),c.default.createElement("option",{value:"Return"},"Return"))),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("span",null,"Supplier"),c.default.createElement("select",{id:"supplier",name:"supplier",disabled:"Return"==o.grnType,className:i.supplier.length>0?"browser-default invalid":"browser-default"},c.default.createElement("option",{value:this.state.grndata.supplier,disabled:!0,selected:!0},"Select Supplier"),n.map(function(e,t){return c.default.createElement("option",{value:e._id,key:t},e.name)}))),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("span",null,"Customer"),c.default.createElement("select",{id:"customer",name:"customer",disabled:"New Grn"==o.grnType,value:this.state.grndata.customer,className:i.customer.length>0?"browser-default invalid":"browser-default"},c.default.createElement("option",{value:"",disabled:!0,selected:!0},"Select Customer"),a.map(function(e,t){return c.default.createElement("option",{value:e._id,key:t},e.name)})))),c.default.createElement("div",{className:"row",style:{marginTop:20}},c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"PO NO",name:"poNo",value:this.state.grndata.poNo,id:"poNo",type:"text",className:i.poNo.length>0?"invalid":"validate"}),c.default.createElement("label",{for:"poNo"},"PO NO")),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"PO Date",name:"poDate",onClick:function(t){return e.setState({currentDatePicker:t.target.name})},id:"poDate",value:this.state.grndata.poDate,type:"text",className:i.poDate.length>0?"invalid":"datepicker validate"}),c.default.createElement("label",{for:"po_date"},"PO Date")),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"Invoice No",name:"invoiceNo",id:"invoiceNo",value:this.state.grndata.invoiceNo,type:"text",className:i.invoiceNo.length>0?"invalid":"validate"}),c.default.createElement("label",{for:"invoiceNo"},"Invoice No")),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"Invoice Date",name:"invoiceDate",onClick:function(t){return e.setState({currentDatePicker:t.target.name})},value:this.state.grndata.invoiceDate,id:"invoiceDate",type:"text",className:i.invoiceDate.length>0?"invalid":"datepicker validate"}),c.default.createElement("label",{for:"invoiceDate"},"Invoice Date")),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"Invoice Qty",name:"invoiceQty",id:"invoiceQty",value:this.state.grndata.invoiceQty,type:"text",className:i.invoiceQty.length>0?"invalid":"validate"}),c.default.createElement("label",{for:"invoiceQty"},"Invoice Qty"))),c.default.createElement("div",{className:"row",style:{marginTop:20}},c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"Transporter Name",name:"transporter",value:this.state.grndata.transporter,id:"transporter",type:"text",className:"validate"}),c.default.createElement("label",{for:"transporter"},"Transporter Name")),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"AWB NO",id:"awbNo",name:"awbNo",value:this.state.grndata.awbNo,type:"text",className:i.awbNo.length>0?"invalid":"validate"}),c.default.createElement("label",{for:"awbNo"},"AWB NO")),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"AWB Date",id:"awbDate",name:"awbDate",onClick:function(t){return e.setState({currentDatePicker:t.target.name})},value:this.state.grndata.awbDate,type:"text",className:i.awbDate.length>0?"invalid":"datepicker validate"}),c.default.createElement("label",{for:"awbDate"},"AWB Date")),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"NO of Cartoons",name:"cartonsReceived",id:"cartonsReceived",value:this.state.grndata.cartonsReceived,type:"text",className:i.cartonsReceived.length>0?"invalid":"validate"}),c.default.createElement("label",{for:"cartonsReceived"},"NO of Cartoons")),c.default.createElement("div",{className:"input-field col m6 s12"},c.default.createElement("input",{placeholder:"Weight",id:"weight",name:"weight",value:this.state.grndata.weight,type:"text",className:i.weight.length>0?"invalid":"validate"}),c.default.createElement("label",{for:"weight"},"Weight")),c.default.createElement("div",{className:"row",style:{paddingTop:50}},c.default.createElement("div",{className:"col s6"}),c.default.createElement("div",{className:"col s12"},c.default.createElement("div",{onClick:function(t){return e.addGrn(t)},className:"waves-effect waves-green btn btn-small"},"Update"),c.default.createElement("div",{className:"modal-close waves-effect red btn btn-small",style:{marginLeft:10}},"Cancel")))))))))}}]),t}(s.Component),g=function(){var e=this;this.selectDate=function(t){var a=e.state,n=a.grndata,r=a.error,l=function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}(t);n[e.state.currentDatePicker]=l,r[e.state.currentDatePicker]="",e.setState({grndata:n,error:r})},this.openModal=function(){var t=document.getElementById("goodreceiptnote");M.Modal.getInstance(t).open(),e.getAllList()},this.getAllList=function(){["customer","supplier","organization"].map(function(t){e.setState(n({},t,[])),(0,d.fetchData)("/"+t+"/all",{token:e.props.user.token}).then(function(a){e.setState(n({},t,a.response),function(){M.updateTextFields()})})})},this.handleFormChange=function(t){t.preventDefault();var a=e.state.grndata,n=e.state.error;a[t.target.name]=t.target.value,n[t.target.name]&&(n[t.target.name]=""),e.setState({grndata:a,error:n})},this.addGrn=function(t){t.preventDefault();var a=e.state.grndata,n=e.state.error,r=!0;Object.keys(n).map(function(e){return"New Grn"==a.grnType&&"customer"==e?(delete a.customer,void(n[e]="")):"Return"==a.grnType&&"supplier"==e?(delete a.supplier,void(n[e]="")):void(0==a[e].trim().length?(r=!1,n[e]="required"):n[e]="")}),e.setState({error:n}),r?(a.transporter="5d32ac607a102a7b5a43eea7",a.grnNumber=e.state.currentGrn,a.token=e.props.user.token,(0,d.fetchData)("/grn",a).then(function(t){var a=document.getElementById("goodreceiptnote");M.Modal.getInstance(a).close(),200==t.outputCode&&M.toast({html:t.message+" Grn No is "+t.grnNumber,classes:"rounded green"}),e.getGrnList();var n=new Date,r={organisation:"",grnType:"",supplier:"",customer:"",supervisor:e.props.user._id,poNo:"",poDate:"",invoiceNo:"",invoiceDate:"",invoiceQty:"",transporter:"",grnNumber:"10",awbNo:"",cartonsReceived:"",awbDate:"",weight:"",goodsArrivedDate:n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()};e.setState({grndata:r})})):M.toast({html:"Fill form properly",classes:"rounded red"})},this.getGrnList=function(){(0,d.fetchData)("/grn/all",{token:e.props.user.token}).then(function(t){var a=t.response;e.setState({grnList:t.response});var n=a.length+1;e.setState({currentGrn:n})})},this.takeAction=function(t){if("1"==t.status)e.printQR(t);else if(t.scannedSkus!==t.expectedPieces){var a=t;a.token=e.props.user.token,a.status="3",(0,d.updateData)("/grn/"+t._id,a).then(function(e){})}},this.printQR=function(t){(0,d.getData)("/grn/"+t._id+"?actionType=print_qrcode","json",e.props.user.token).then(function(e){e.outputCode?(M.toast({html:e.message,classes:"rounded green"}),location.href="/grnprint/"+t._id):M.toast({html:e.message,classes:"rounded red"})})}},v=function(e){return{user:e.user}};t.default=(0,u.withRouter)((0,m.connect)(v,null)(f))}});